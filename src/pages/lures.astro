---
import '../styles/global.css';
import { supabase, type Lure } from '../lib/supabase';

// ãƒ«ã‚¢ãƒ¼ãƒ‡ãƒ¼ã‚¿å–å¾—
const { data: lures, error } = await supabase
  .from('lures')
  .select('*')
  .order('created_at', { ascending: false });

if (error) {
  console.error('Error fetching lures:', error);
}
---

<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="ä¸–ç•Œæœ€å¤§ã®ãƒ«ã‚¢ãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ - ãƒ«ã‚¢ãƒ¼ä¸€è¦§" />
    <meta name="viewport" content="width=device-width" />
    <title>ãƒ«ã‚¢ãƒ¼ä¸€è¦§ - Lure DB</title>
  </head>
  <body class="bg-gradient-to-br from-blue-50 to-teal-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
      <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
      <header class="mb-12 text-center">
        <h1 class="text-5xl font-bold text-gray-900 mb-2">
          ğŸ£ Lure DB
        </h1>
        <p class="text-xl text-gray-600">
          ä¸–ç•Œæœ€å¤§ã®ãƒ«ã‚¢ãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
        </p>
        <div class="mt-4">
          <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-semibold">
            ç™»éŒ²ãƒ«ã‚¢ãƒ¼æ•°: {lures?.length || 0}æœ¬
          </span>
        </div>
      </header>

      <!-- ãƒ«ã‚¢ãƒ¼ä¸€è¦§ -->
      {lures && lures.length > 0 ? (
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {lures.map((lure: Lure) => (
            <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition-shadow duration-300">
              {/* ç”»åƒã‚¨ãƒªã‚¢ï¼ˆä»®ï¼‰ */}
              <div class="h-48 bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center">
                <span class="text-6xl">ğŸ£</span>
              </div>

              {/* å†…å®¹ã‚¨ãƒªã‚¢ */}
              <div class="p-6">
                <div class="flex items-start justify-between mb-3">
                  <h2 class="text-2xl font-bold text-gray-900">
                    {lure.name}
                  </h2>
                  <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold">
                    {lure.type}
                  </span>
                </div>

                <p class="text-gray-600 mb-2">
                  ãƒ¡ãƒ¼ã‚«ãƒ¼: <span class="font-semibold">{lure.manufacturer}</span>
                </p>

                <p class="text-gray-700 mb-4 text-sm line-clamp-2">
                  {lure.description}
                </p>

                {/* ã‚«ãƒ©ãƒ¼æƒ…å ± */}
                {lure.color_name && (
                  <div class="mb-4 p-3 bg-gray-50 rounded-lg">
                    <p class="text-sm font-semibold text-gray-700 mb-1">
                      {lure.color_name}
                    </p>
                    {lure.color_description && (
                      <p class="text-xs text-gray-600">
                        {lure.color_description}
                      </p>
                    )}
                  </div>
                )}

                {/* è©³ç´°æƒ…å ± */}
                <div class="grid grid-cols-2 gap-2 text-sm text-gray-600 mb-4">
                  {lure.length && (
                    <div>
                      <span class="font-semibold">é•·ã•:</span> {lure.length}mm
                    </div>
                  )}
                  {lure.weight && (
                    <div>
                      <span class="font-semibold">é‡ã•:</span> {lure.weight}g
                    </div>
                  )}
                  {lure.diving_depth && (
                    <div>
                      <span class="font-semibold">æ½œè¡Œ:</span> {lure.diving_depth}
                    </div>
                  )}
                  {lure.release_year && (
                    <div>
                      <span class="font-semibold">ç™ºå£²:</span> {lure.release_year}å¹´
                    </div>
                  )}
                </div>

                {/* ä¾¡æ ¼ */}
                <div class="flex items-center justify-between pt-4 border-t border-gray-200">
                  <span class="text-2xl font-bold text-teal-600">
                    Â¥{lure.price?.toLocaleString()}
                  </span>
                  {lure.is_limited && (
                    <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-xs font-semibold">
                      é™å®š
                    </span>
                  )}
                </div>
              </div>
            </div>
          ))}
        </div>
      ) : (
        <div class="text-center py-16">
          <p class="text-gray-600 text-lg">
            ãƒ«ã‚¢ãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“
          </p>
        </div>
      )}

      <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
      <footer class="text-center mt-16 text-gray-500">
        <p>&copy; 2026 Lure DB. All rights reserved.</p>
      </footer>
    </div>
  </body>
</html>
