---
import Badge from './Badge.astro';
import Placeholder from './Placeholder.astro';
import type { ColorVariant } from '../lib/types';

interface Props {
  color: ColorVariant;
}

const { color } = Astro.props;
---

<div class="flex items-center gap-4 py-4 border-b border-gray-100 last:border-b-0">
  <div class="w-14 h-14 rounded-lg overflow-hidden flex-shrink-0 border border-gray-100">
    {color.images && color.images.length > 0 ? (
      <img
        src={color.images[0]}
        alt={color.color_name}
        loading="lazy"
        class="w-full h-full object-cover"
      />
    ) : (
      <Placeholder size="sm" />
    )}
  </div>

  <div class="flex-1 min-w-0">
    <p class="text-sm font-medium text-gray-900 truncate">
      {color.color_name}
    </p>
    {(color.weight || color.length) && (
      <p class="text-xs text-text-secondary mt-0.5">
        {color.length && <span>{color.length}mm</span>}
        {color.length && color.weight && <span class="mx-1">/</span>}
        {color.weight && <span>{color.weight}g</span>}
      </p>
    )}
  </div>

  <div class="flex items-center gap-2 flex-shrink-0">
    {color.is_limited && <Badge label="限定" variant="limited" />}
    {color.is_discontinued && <Badge label="廃盤" variant="discontinued" />}
  </div>

  {color.price > 0 && (
    <div class="text-sm font-bold text-gray-900 flex-shrink-0">
      ¥{color.price.toLocaleString()}
    </div>
  )}
</div>
